/*
 * Ext JS Library 1.1
 * Copyright(c) 2006-2007, Ext JS, LLC.
 * licensing@extjs.com
 * 
 * http://www.extjs.com/license
 */


Ext.data.JsonReader=function(_1,_2){_1=_1||{};Ext.data.JsonReader.superclass.constructor.call(this,_1,_2||_1.fields);};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(_3){var _4=_3.responseText;var o=eval("("+_4+")");if(!o){throw{message:"JsonReader.read: Json object not found"};}if(o.metaData){delete this.ef;this.meta=o.metaData;this.recordType=Ext.data.Record.create(o.metaData.fields);this.onMetaChange(this.meta,this.recordType,o);}return this.readRecords(o);},onMetaChange:function(_6,_7,o){},simpleAccess:function(_9,_a){return _9[_a];},getJsonAccessor:function(){var re=/[\[\.]/;return function(_c){try{return(re.test(_c))?new Function("obj","return obj."+_c):function(_d){return _d[_c];};}catch(e){}return Ext.emptyFn;};}(),readRecords:function(o){this.jsonData=o;var s=this.meta,_10=this.recordType,f=_10.prototype.fields,fi=f.items,fl=f.length;if(!this.ef){if(s.totalProperty){this.getTotal=this.getJsonAccessor(s.totalProperty);}if(s.successProperty){this.getSuccess=this.getJsonAccessor(s.successProperty);}this.getRoot=s.root?this.getJsonAccessor(s.root):function(p){return p;};if(s.id){var g=this.getJsonAccessor(s.id);this.getId=function(rec){var r=g(rec);return(r===undefined||r==="")?null:r;};}else{this.getId=function(){return null;};}this.ef=[];for(var i=0;i<fl;i++){f=fi[i];var map=(f.mapping!==undefined&&f.mapping!==null)?f.mapping:f.name;this.ef[i]=this.getJsonAccessor(map);}}var _1a=this.getRoot(o),c=_1a.length,_1c=c,_1d=true;if(s.totalProperty){var v=parseInt(this.getTotal(o),10);if(!isNaN(v)){_1c=v;}}if(s.successProperty){var v=this.getSuccess(o);if(v===false||v==="false"){_1d=false;}}var _1f=[];for(var i=0;i<c;i++){var n=_1a[i];var _21={};var id=this.getId(n);for(var j=0;j<fl;j++){f=fi[j];var v=this.ef[j](n);_21[f.name]=f.convert((v!==undefined)?v:f.defaultValue);}var _24=new _10(_21,id);_24.json=n;_1f[i]=_24;}return{success:_1d,records:_1f,totalRecords:_1c};}});