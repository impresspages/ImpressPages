/*
 * Ext JS Library 1.1
 * Copyright(c) 2006-2007, Ext JS, LLC.
 * licensing@extjs.com
 * 
 * http://www.extjs.com/license
 */


Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var s=this.html;s=["<tpl>",s,"</tpl>"].join("");var re=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/;var _3=/^<tpl\b[^>]*?for="(.*?)"/;var _4=/^<tpl\b[^>]*?if="(.*?)"/;var _5=/^<tpl\b[^>]*?exec="(.*?)"/;var m,id=0;var _8=[];while(m=s.match(re)){var m2=m[0].match(_3);var m3=m[0].match(_4);var m4=m[0].match(_5);var _c=null,fn=null,_e=null;var _f=m2&&m2[1]?m2[1]:"";if(m3){_c=m3&&m3[1]?m3[1]:null;if(_c){fn=new Function("values","parent","with(values){ return "+(Ext.util.Format.htmlDecode(_c))+"; }");}}if(m4){_c=m4&&m4[1]?m4[1]:null;if(_c){_e=new Function("values","parent","with(values){ "+(Ext.util.Format.htmlDecode(_c))+"; }");}}if(_f){switch(_f){case".":_f=new Function("values","parent","with(values){ return values; }");break;case"..":_f=new Function("values","parent","with(values){ return parent; }");break;default:_f=new Function("values","parent","with(values){ return "+_f+"; }");}}_8.push({id:id,target:_f,exec:_e,test:fn,body:m[1]||""});s=s.replace(m[0],"{xtpl"+id+"}");++id;}for(var i=_8.length-1;i>=0;--i){this.compileTpl(_8[i]);}this.master=_8[_8.length-1];this.tpls=_8;};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w-\.]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,applySubTemplate:function(id,_12,_13){var t=this.tpls[id];if(t.test&&!t.test.call(this,_12,_13)){return"";}if(t.exec&&t.exec.call(this,_12,_13)){return"";}var vs=t.target?t.target.call(this,_12,_13):_12;_13=t.target?_12:_13;if(t.target&&vs instanceof Array){var buf=[];for(var i=0,len=vs.length;i<len;i++){buf[buf.length]=t.compiled.call(this,vs[i],_13);}return buf.join("");}return t.compiled.call(this,vs,_13);},compileTpl:function(tpl){var fm=Ext.util.Format;var _1b=this.disableFormats!==true;var sep=Ext.isGecko?"+":",";var fn=function(m,_1f,_20,_21){if(_1f.substr(0,4)=="xtpl"){return"'"+sep+"this.applySubTemplate("+_1f.substr(4)+", values, parent)"+sep+"'";}var v;if(_1f.indexOf(".")!=-1){v=_1f;}else{v="values['"+_1f+"']";}if(_20&&_1b){_21=_21?","+_21:"";if(_20.substr(0,5)!="this."){_20="fm."+_20+"(";}else{_20="this.call(\""+_20.substr(5)+"\", ";_21=", values";}}else{_21="";_20="("+v+" === undefined ? '' : ";}return"'"+sep+_20+v+_21+")"+sep+"'";};var _23;if(Ext.isGecko){_23="tpl.compiled = function(values, parent){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+"';};";}else{_23=["tpl.compiled = function(values, parent){ return ['"];_23.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn));_23.push("'].join('');};");_23=_23.join("");}eval(_23);return this;},applyTemplate:function(_24){return this.master.compiled.call(this,_24,{});var s=this.subs;},apply:function(){return this.applyTemplate.apply(this,arguments);},compile:function(){return this;}});Ext.XTemplate.from=function(el){el=Ext.getDom(el);return new Ext.XTemplate(el.value||el.innerHTML);};