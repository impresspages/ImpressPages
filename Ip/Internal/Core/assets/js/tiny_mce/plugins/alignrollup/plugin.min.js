tinymce.PluginManager.add('alignrollup', function(editor, url) {
    //ispired by example http://www.devsumo.com/technotes/2014/06/tinymce-4-rolling-up-toolbar-buttons/

    editor.addMenuItem('alignleft', {text: 'Align Left',
        icon: 'alignleft',
        cmd: 'JustifyLeft'});
    editor.addMenuItem('alignright', {text: 'Align Right',
        icon: 'alignright',
        cmd: 'JustifyRight'});
    editor.addMenuItem('aligncenter', {text: 'Align Center',
        icon: 'aligncenter',
        cmd: 'JustifyCenter'});
    editor.addMenuItem('alignfull', {text: 'Align Full',
        icon: 'alignjustify',
        cmd: 'JustifyFull'});
    editor.addButton('alignrollup',
        {type   : 'MenuButton',
            icon   : 'alignleft',
            title  : 'Align',
            menu   : [editor.menuItems['alignleft'],
                editor.menuItems['alignright'],
                editor.menuItems['aligncenter'],
                editor.menuItems['alignfull']
            ]
        });

});
